<!-- drop zone -->
<form class="simple-form">
<input type="file" name="data" multiple class="btn btn-default">
</input>
</form>

<div ng-repeat="upload in uploads"
     class="form-group">

  <div ng-if="!upload.isFinished()">

    <div class="row">
      <div class="col-md-9">{{upload.name}}</div>
      <div class="col-md-3">
        {{upload.transmittedSize/1024/1024|number:2 }}/{{ upload.totalSize/1024/1024|number:2 }} Mo
      </div>
    </div>
    <div class="row">
      <div class="col-md-12 progress">
        <div class="progress-bar progress-bar"
             role="progressbar"
             aria-valuenow="{{upload.transmittedSize}}"
             aria-valuemin="0"
             aria-valuemax="{{upload.totalSize}}"
             style="width: {{upload.getTransmittedPercent()}}%;"
             ng-if="upload.status == 's3_upload' || upload.status == 'finalize'"
        >
          {{ upload.getTransmittedPercent()|number:1 }}%
        </div>

        <div class="progress-bar progress-bar-striped active"
             role="progressbar"
             aria-valuenow="100"
             aria-valuemin="0"
             aria-valuemax="100"
             style="width: 100%;"
             ng-if="upload.status == 'bootstrap'"
        >
          {{ upload.getTransmittedPercent()|number:1 }}%
        </div>

        <div class="progress-bar progress-bar"
             role="progressbar"
             aria-valuenow="0"
             aria-valuemin="0"
             aria-valuemax="100"
             style="width: 0%;"
             ng-if="upload.status == 'stalled'"
        >
          {{ upload.getTransmittedPercent()|number:1 }}%
        </div>

      </div>
    </div>

  </div>
</div>

<div ng-repeat="upload in uploads"
     class="form-group">

  <div ng-if="upload.status == 'error'">

    <div class="alert alert-danger">

      <div class="row">
        <div class="col-md-9">{{upload.name}}</div>
      </div>

      <div class="row">
        <div class="col-md-9">{{upload.error}}</div>
      </div>

    </div>

  </div>

  <div ng-if="upload.status == 'already_uploaded'">

    <div class="alert alert-info">

      <div class="row">
        <div class="col-md-9">{{upload.name}}</div>
      </div>

      <div class="row">
        Fichier déjà uploadé
      </div>

    </div>

  </div>

</div>

<div ng-repeat="upload in uploads"
     class="form-group">

  <div ng-if="upload.status == 'success'">

    <div class="alert alert-success">

      <div class="row">
        <div class="col-md-9">{{upload.name}}</div>
      </div>

      <div class="row">
        Upload terminé
      </div>

    </div>

  </div>
</div>
