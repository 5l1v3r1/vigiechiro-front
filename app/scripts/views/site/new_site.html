<div class="panel panel-default">
  <div class="panel-heading" role="tab" id="headingOne">
    <h4 class="panel-title">
      <a data-toggle="collapse" data-target="#show-site-collapse-{{site._id}}"
         aria-expanded="false" aria-controls="show-site-collapse-{{site._id}}"
         ng-click="openCollapse('#show-site-collapse-' + site._id)">
        <span>{{site.titre}}</span>
        <span class="label label-success pull-right"
              ng-show="site.observateur && site.observateur._id == userId">
          Propriétaire
        </span>
      </a>
    </h4>
  </div>

  <div class="collapse" id="show-site-collapse-{{site._id}}">
    <div class="panel-body">
      <form class="simple-form" novalidate name="siteForm" ng-submit="saveSite()">
        <div ng-show="randomSelectionAllowed">
          Faire un tirage aléatoire
          <a class="btn btn-default" id="random-selection-true"
             ng-click="randomSelection(true)">
            Oui
          </a>
          <a class="btn btn-default" id="random-selection-false"
             ng-click="randomSelection(false)">
            Non
          </a>
        </div>

        <ul class="list-group" ng-show="displaySteps">
          <li class="list-group-item" ng-repeat="step in steps">
            <span ng-show="$index < stepId">✓&nbsp;<strike>{{step}}</strike></span>
            <span ng-hide="$index < stepId">{{step}}</span>
          </li>
        </ul>

        <a class="btn btn-default" id="valid-origin"
           ng-click="validOrigin()" ng-show="validOriginAllowed">
          Valider le point d'origine
        </a>

        <div ng-show="retrySelectionAllowed">
          <a class="btn btn-default" id="retry-selection"
             ng-click="retrySelection()">
            Refaire un tirage
          </a>
          <label for="motif">Motif :</label>
          <input type="text" id="motif" ng-model="retryMotif">
        </div>

        <div class="form-group">
          <!--<input type="text" class="numero_grille_stoc" value="numéro grille stoc"
            ng-if="protocoleAlgoSite != 'ROUTIER'">-->
          <div class="g-maps"></div>
        </div>

        <div class="form-group">
          <textarea rows="3" class="form-control" name="commentaire"
                    ng-model="site.commentaire" ng-disabled="readOnly"
                    placeholder="Commentaire"></textarea>
        </div>

        <div class="checkbox" ng-show="isAdmin && userRegistered">
          <label>
            <input type="checkbox" name="verrouille" ng-model="site.verrouille"
                   ng-true-value="true" ng-false-value="false">
              Verrouillé
          </label>
        </div>

        <div class="form-group">
          <input class="save-user btn btn-primary" type="submit" value="Sauvegarder"
                 ng-hide="siteForm.$pristine">
        </div>
      </form>
    </div>
  </div>
</div>
