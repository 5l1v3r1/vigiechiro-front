<div class="panel panel-default">
  <div class="panel-heading" role="tab" id="headingOne">
    <h4 class="panel-title">
      <a data-toggle="collapse" data-target="#show-participation-collapse-{{participation._id}}"
         aria-expanded="false" aria-controls="show-participation-collapse-{{participation._id}}"
         ng-click="openCollapse('#show-participation-collapse-' + participation._id)">
        {{title}}
      </a>
    </h4>
  </div>

  <div class="collapse {{collapsed === undefined ? 'in' : ''}}" id="show-participation-collapse-{{participation._id}}">
    <div class="panel-body">
      <form class="simple-form" novalidate name="participationForm"
        ng-submit="saveParticipation()">

        <div class="input-group form-group">
          <span class="input-group-addon">Protocole</span>
          <select class="form-control" name="protocole"
            ng-model="participation.protocole"
            ng-disabled="readOnly" required>
            <option ng-repeat="protocole in protocoles"
              value="{{protocole._id}}">{{ protocole.titre }}
            </option>
          </select>
        </div>
        <span ng-show="submitted && !participationForm.protocole.$error.required" class="help-block">
          Champ requis
        </span>

        <div class="input-group form-group">
          <span class="input-group-addon">Site</span>
          <select class="form-control" name="site"
            ng-model="participation.site"
            ng-disabled="readOnly" required>
            <option ng-repeat="site in sites" value="{{site._id}}">
              {{ site._id }}
            </option>
          </select>
        </div>
        <span ng-show="submitted && !participationForm.site.$error.required" class="help-block">
          Champ requis
        </span>

        <div class="form-group" ng-class="{'has-error': participationForm.date_debut.$invalid && !participationForm.$pristine}">
          <div class="input-group">
            <label class="input-group-addon" for="date_debut">Date de début</label>
            <input type="date" class="form-control" id="date_debut" name="date_debut"
              ng-model="participation.date_debut" ng-disabled="readOnly" required>
          </div>
          <span ng-show="submitted && participationForm.date_debut.$error.required"
                class="help-block">Champ requis</span>
        </div>

        <div class="form-group" ng-class="{'has-error': participationForm.date_fin.$invalid && !participationForm.$pristine}">
          <div class="input-group">
            <label class="input-group-addon" for="date_fin">Date de fin</label>
            <input type="date" class="form-control" id="date_fin" name="date_fin"
                   ng-model="participation.date_fin" ng-disabled="readOnly">
          </div>
        </div>

        <div class="form-group" ng-class="{'has-error': participationForm.meteo.temperature_debut.$invalid && !participationForm.$pristine}">
          <div class="input-group">
            <label class="input-group-addon" for="meteo.temperature_debut">
              Température au début
            </label>
            <input type="text" class="form-control" id="meteo.temperature_debut" name="temperature_debut"
              ng-model="participation.meteo.temperature_debut" ng-disabled="readOnly">
          </div>
        </div>

        <div class="form-group" ng-class="{'has-error': participationForm.meteo.temperature_fin.$invalid && !participationForm.$pristine}">
          <div class="input-group">
            <label class="input-group-addon" for="meteo.temperature_fin">
              Température à la fin
            </label>
            <input type="text" class="form-control" id="meteo.temperature_fin" name="temperature_fin"
              ng-model="participation.meteo.temperature_fin" ng-disabled="readOnly">
          </div>
        </div>

        <div class="input-group form-group">
          <span class="input-group-addon">Vent</span>
          <select class="form-control" name="vent"
            ng-model="participation.meteo.vent"
            ng-disabled="readOnly">
            <option value="NUL">nul</option>
            <option value="FAIBLE">faible</option>
            <option value="MOYEN">moyen</option>
            <option value="FORT">fort</option>
          </select>
        </div>

        <div class="input-group form-group">
          <span class="input-group-addon">Couverture</span>
          <select class="form-control" name="couverture"
            ng-model="participation.meteo.couverture"
            ng-disabled="readOnly">
            <option value="0-25">0-25</option>
            <option value="25-50">25-50</option>
            <option value="50-75">50-75</option>
            <option value="75-100">75-100</option>
          </select>
        </div>

        <div class="form-group" ng-class="{'has-error': participationForm.commentaire.$invalid && !participationForm.$pristine}">
          <div class="input-group">
            <label class="input-group-addon" for="commentaire">Commentaire</label>
            <input type="text" class="form-control" id="commentaire"
              name="commentaire"
              ng-model="participation.commentaire" ng-disabled="readOnly">
          </div>
        </div>

        <div class="form-group" ng-class="{'has-error': participationForm.pieces_jointes.$invalid && !participationForm.$pristine}">
          <div class="input-group">
            <label class="input-group-addon" for="pieces_jointes">
              Pièces jointes
            </label>
            <input type="file" class="form-control" id="pieces_jointes"
              name="pieces_jointes"
              ng-model="participation.pieces_jointes" ng-disabled="readOnly">
          </div>
          <span ng-show="submitted && participationForm.pieces_jointes.$error.required" class="help-block">
            Champ requis
          </span>
        </div>

        <div class="form-group" ng-class="{'has-error': participationForm.posts.$invalid && !participationForm.$pristine}">
          <div class="input-group" ng-repeat="post in posts">
            {{ post.auteur }} le {{ post.date }}<br>
            {{ post.message }}
          </div>
          <div class="input-group">
            <label class="input-group-addon" for="posts">
              Nouveau post
            </label>
            <input type="text" class="form-control" id="posts"
              name="posts"
              ng-model="participation.posts" ng-disabled="readOnly">
          </div>
          <button class="btn btn-primary" ng-action="">Envoyer</button>
        </div>

        <div class="form-group" ng-class="{'has-error': participationForm.configuration.detecteur_enregisteur_numero_serie.$invalid && !participationForm.$pristine}">
          <div class="input-group">
            <label class="input-group-addon" for="configuration.detecteur_enregisteur_numero_serie">
              Numéro de série du détecteur enregisteur
            </label>
            <input type="text" class="form-control" id="configuration.detecteur_enregisteur_numero_serie"
              name="detecteur_enregisteur_numero_serie"
              ng-model="participation.configuration.detecteur_enregisteur_numero_serie" ng-disabled="readOnly">
          </div>
        </div>

        <div class="input-group form-group" ng-class="{'has-error': participationForm.configuration.micro0_position.$invalid && !participationForm.$pristine}">
          <span class="input-group-addon">Position micro 0</span>
          <select class="form-control" name="micro0_position"
            ng-model="participation.configuration.micro0_position"
            ng-disabled="readOnly">
            <option value="SOL">Sol</option>
            <option value="CANOPEE">Canopée</option>
          </select>
        </div>

        <div class="form-group" ng-class="{'has-error': participationForm.configuration.micro0_numero_serie.$invalid && !participationForm.$pristine}">
          <div class="input-group">
            <label class="input-group-addon" for="configuration.micro0_numero_serie">
              Numéro de série du micro 0
            </label>
            <input type="text" class="form-control" id="configuration.micro0_numero_serie"
              name="micro0_numero_serie"
              ng-model="participation.configuration.micro0_numero_serie" ng-disabled="readOnly">
          </div>
        </div>

        <div class="form-group" ng-class="{'has-error': participationForm.configuration.micro0_hauteur.$invalid && !participationForm.$pristine}">
          <div class="input-group">
            <label class="input-group-addon" for="configuration.micro0_hauteur">
              Hauteur du micro 0
            </label>
            <input type="text" class="form-control" id="configuration.micro0_hauteur"
              name="micro0_hauteur"
              ng-model="participation.configuration.micro0_hauteur" ng-disabled="readOnly">
          </div>
        </div>

        <div class="input-group form-group" ng-class="{'has-error': participationForm.configuration.micro1_position.$invalid && !participationForm.$pristine}">
          <span class="input-group-addon">Position micro 1</span>
          <select class="form-control" name="micro1_position"
            ng-model="participation.configuration.micro1_position"
            ng-disabled="readOnly">
            <option value="SOL">Sol</option>
            <option value="CANOPEE">Canopée</option>
          </select>
        </div>

        <div class="form-group" ng-class="{'has-error': participationForm.configuration.micro1_numero_serie.$invalid && !participationForm.$pristine}">
          <div class="input-group">
            <label class="input-group-addon" for="configuration.micro1_numero_serie">
              Numéro de série du micro 1
            </label>
            <input type="text" class="form-control" id="configuration.micro1_numero_serie"
              name="micro1_numero_serie"
              ng-model="participation.configuration.micro1_numero_serie" ng-disabled="readOnly">
          </div>
        </div>

        <div class="form-group" ng-class="{'has-error': participationForm.configuration.micro1_hauteur.$invalid && !participationForm.$pristine}">
          <div class="input-group">
            <label class="input-group-addon" for="configuration.micro1_hauteur">
              Hauteur du micro 1
            </label>
            <input type="text" class="form-control" id="configuration.micro1_hauteur"
              name="micro1_hauteur"
              ng-model="participation.configuration.micro1_hauteur" ng-disabled="readOnly">
          </div>
        </div>

        <div class="input-group form-group">
          <input class="save-participation btn btn-primary" type="submit"
                 value="Sauvegarder" ng-hide="participationForm.$pristine">
        </div>

      </form>
    </div>
  </div>
</div>
